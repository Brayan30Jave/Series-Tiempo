<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Análisis de Series de Tiempo de Ventas | Asignatura Series de Tiempo</title>
  <meta name="description" content="Este libro permite mostrar los avances realizados en la asignatura de series de tiempo." />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Análisis de Series de Tiempo de Ventas | Asignatura Series de Tiempo" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Este libro permite mostrar los avances realizados en la asignatura de series de tiempo." />
  <meta name="github-repo" content="Brayan30Jave/Series-Tiempo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Análisis de Series de Tiempo de Ventas | Asignatura Series de Tiempo" />
  
  <meta name="twitter:description" content="Este libro permite mostrar los avances realizados en la asignatura de series de tiempo." />
  

<meta name="author" content="Brayan Hernandez Cardona - Adriana Avila - WILLIAM ROJAS CARABALI" />


<meta name="date" content="2024-11-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pronóstico-de-ventas-en-empresa-retail.html"/>
<link rel="next" href="preprocesamientoy-visualización.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Acerca de este libro</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#introducción"><i class="fa fa-check"></i><b>1.1</b> Introducción</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="pronóstico-de-ventas-en-empresa-retail.html"><a href="pronóstico-de-ventas-en-empresa-retail.html"><i class="fa fa-check"></i><b>2</b> Pronóstico de Ventas en empresa Retail</a>
<ul>
<li class="chapter" data-level="2.1" data-path="pronóstico-de-ventas-en-empresa-retail.html"><a href="pronóstico-de-ventas-en-empresa-retail.html#optimizando-el-futuro-del-retail"><i class="fa fa-check"></i><b>2.1</b> Optimizando el Futuro del Retail</a></li>
<li class="chapter" data-level="2.2" data-path="pronóstico-de-ventas-en-empresa-retail.html"><a href="pronóstico-de-ventas-en-empresa-retail.html#estructura-del-dataset"><i class="fa fa-check"></i><b>2.2</b> Estructura del dataset</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="pronóstico-de-ventas-en-empresa-retail.html"><a href="pronóstico-de-ventas-en-empresa-retail.html#por-qué-es-crucial-pronosticar-las-ventas"><i class="fa fa-check"></i><b>2.2.1</b> ¿Por qué es crucial pronosticar las ventas?</a></li>
<li class="chapter" data-level="2.2.2" data-path="pronóstico-de-ventas-en-empresa-retail.html"><a href="pronóstico-de-ventas-en-empresa-retail.html#qué-podemos-aportar-desde-la-ciencia-de-datos"><i class="fa fa-check"></i><b>2.2.2</b> ¿Qué podemos aportar desde la ciencia de datos?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="análisis-de-series-de-tiempo-de-ventas.html"><a href="análisis-de-series-de-tiempo-de-ventas.html"><i class="fa fa-check"></i><b>3</b> Análisis de Series de Tiempo de Ventas</a>
<ul>
<li class="chapter" data-level="3.1" data-path="análisis-de-series-de-tiempo-de-ventas.html"><a href="análisis-de-series-de-tiempo-de-ventas.html#limpieza-y-procesamiento-de-los-datos"><i class="fa fa-check"></i><b>3.1</b> Limpieza y procesamiento de los datos</a></li>
<li class="chapter" data-level="3.2" data-path="análisis-de-series-de-tiempo-de-ventas.html"><a href="análisis-de-series-de-tiempo-de-ventas.html#análisis-con-promedio-móvil"><i class="fa fa-check"></i><b>3.2</b> Análisis con Promedio Móvil:</a></li>
<li class="chapter" data-level="3.3" data-path="análisis-de-series-de-tiempo-de-ventas.html"><a href="análisis-de-series-de-tiempo-de-ventas.html#análisis-de-rezagos"><i class="fa fa-check"></i><b>3.3</b> Análisis de Rezagos:</a></li>
<li class="chapter" data-level="3.4" data-path="análisis-de-series-de-tiempo-de-ventas.html"><a href="análisis-de-series-de-tiempo-de-ventas.html#análisis-de-estacionalidad-descomposición"><i class="fa fa-check"></i><b>3.4</b> Análisis de Estacionalidad (Descomposición):</a></li>
<li class="chapter" data-level="3.5" data-path="análisis-de-series-de-tiempo-de-ventas.html"><a href="análisis-de-series-de-tiempo-de-ventas.html#análisis-de-estacionalidad-promedio-mensual"><i class="fa fa-check"></i><b>3.5</b> Análisis de Estacionalidad (Promedio Mensual):</a></li>
<li class="chapter" data-level="3.6" data-path="análisis-de-series-de-tiempo-de-ventas.html"><a href="análisis-de-series-de-tiempo-de-ventas.html#conclusión"><i class="fa fa-check"></i><b>3.6</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html"><i class="fa fa-check"></i><b>4</b> Preprocesamientoy visualización</a>
<ul>
<li class="chapter" data-level="4.1" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#metodología"><i class="fa fa-check"></i><b>4.1</b> Metodología</a></li>
<li class="chapter" data-level="4.2" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#análisis-detallado-de-los-resultados"><i class="fa fa-check"></i><b>4.2</b> Análisis Detallado de los Resultados:</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#visualización-inicial-y-exploración-de-datos"><i class="fa fa-check"></i><b>4.2.1</b> Visualización Inicial y Exploración de Datos:</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#prueba-de-estacionariedad-dickey-fuller-aumentada---adf"><i class="fa fa-check"></i><b>4.3</b> Prueba de Estacionariedad (Dickey-Fuller Aumentada - ADF):</a></li>
<li class="chapter" data-level="4.4" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#visualización-de-la-serie-diferenciada"><i class="fa fa-check"></i><b>4.4</b> Visualización de la Serie Diferenciada:</a></li>
<li class="chapter" data-level="4.5" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#funciones-de-autocorrelación-acf-y-autocorrelación-parcial-pacf"><i class="fa fa-check"></i><b>4.5</b> Funciones de Autocorrelación (ACF) y Autocorrelación Parcial (PACF):</a></li>
<li class="chapter" data-level="4.6" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#descomposición-de-la-serie-componente-estacional"><i class="fa fa-check"></i><b>4.6</b> Descomposición de la Serie (Componente Estacional):</a></li>
<li class="chapter" data-level="4.7" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#modelo-arima-2-0-1"><i class="fa fa-check"></i><b>4.7</b> Modelo ARIMA (2, 0, 1):</a></li>
<li class="chapter" data-level="4.8" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#detección-de-puntos-de-cambio"><i class="fa fa-check"></i><b>4.8</b> Detección de Puntos de Cambio:</a></li>
<li class="chapter" data-level="4.9" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#predicción"><i class="fa fa-check"></i><b>4.9</b> Predicción:</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#predicción-a-6-periodos"><i class="fa fa-check"></i><b>4.9.1</b> Predicción a 6 periodos:</a></li>
<li class="chapter" data-level="4.9.2" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#predicción-a-3-periodos"><i class="fa fa-check"></i><b>4.9.2</b> Predicción a 3 periodos:</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#validación-del-modelo-análisis-de-residuos"><i class="fa fa-check"></i><b>4.10</b> Validación del Modelo (Análisis de Residuos):</a></li>
<li class="chapter" data-level="4.11" data-path="preprocesamientoy-visualización.html"><a href="preprocesamientoy-visualización.html#conclusiones"><i class="fa fa-check"></i><b>4.11</b> Conclusiones:</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Asignatura Series de Tiempo</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="análisis-de-series-de-tiempo-de-ventas" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Análisis de Series de Tiempo de Ventas<a href="análisis-de-series-de-tiempo-de-ventas.html#análisis-de-series-de-tiempo-de-ventas" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Este capítulo presenta un análisis de una serie de tiempo de ventas, utilizando R y diversas librerías como readxl para leer los datos desde un libro de excel, forecast, dplyr, lubridate y ggplot2. El objetivo es explorar los datos, identificar patrones y tendencias, y sentar las bases para futuros análisis.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb3-1" tabindex="-1"></a><span class="co">#install.packages(&quot;readxl&quot;)</span></span>
<span id="cb3-2"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb3-2" tabindex="-1"></a><span class="co">#install.packages(&quot;forecast&quot;)</span></span>
<span id="cb3-3"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb3-3" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb4-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb4-2"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb4-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb4-3"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb4-3" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb4-4"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb4-4" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-5"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb4-5" tabindex="-1"></a><span class="fu">library</span>(forecast)</span></code></pre></div>
<div id="limpieza-y-procesamiento-de-los-datos" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Limpieza y procesamiento de los datos<a href="análisis-de-series-de-tiempo-de-ventas.html#limpieza-y-procesamiento-de-los-datos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El proceso comienza con la importación y preparación de los datos desde un archivo Excel. Se realizan tareas de limpieza, como la eliminación de caracteres especiales en la columna de costos y la conversión de la fecha de transacción al formato adecuado. Finalmente, se eliminan las filas con valores faltantes en la columna de costos.</p>
<p>Para facilitar el análisis de la estacionalidad, se crea una columna “Mes” a partir de las fechas de transacción.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-1" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;MUESTRA SERIE TIEMPO.xlsx&quot;</span>, <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">&#39;numeric&#39;</span>,<span class="st">&#39;numeric&#39;</span>,<span class="st">&#39;date&#39;</span>,<span class="st">&#39;numeric&#39;</span>,<span class="st">&#39;numeric&#39;</span>,<span class="st">&#39;text&#39;</span>,<span class="st">&#39;numeric&#39;</span>,<span class="st">&#39;text&#39;</span>,<span class="st">&#39;text&#39;</span>,<span class="st">&#39;text&#39;</span>,<span class="st">&#39;numeric&#39;</span>,<span class="st">&#39;numeric&#39;</span>,<span class="st">&#39;numeric&#39;</span>,<span class="st">&#39;text&#39;</span>,<span class="st">&#39;numeric&#39;</span>,<span class="st">&#39;text&#39;</span>,<span class="st">&#39;text&#39;</span>,<span class="st">&#39;text&#39;</span></span>
<span id="cb5-2"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-2" tabindex="-1"></a>))</span>
<span id="cb5-3"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-5" tabindex="-1"></a><span class="co"># Agregar una columna de mes</span></span>
<span id="cb5-6"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-6" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Mes =</span> <span class="fu">month</span>(transaction_date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">TRUE</span>))</span>
<span id="cb5-7"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-9" tabindex="-1"></a><span class="co"># Limpiar y transformar los datos</span></span>
<span id="cb5-10"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-10" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cost =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">&quot;[</span><span class="sc">\\</span><span class="st">$, ]&quot;</span>, <span class="st">&quot;&quot;</span>, cost)), <span class="co"># Elimina $, espacios y comas de &#39;cost&#39; y lo convierte a numérico</span></span>
<span id="cb5-12"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-12" tabindex="-1"></a>         <span class="at">transaction_date =</span> <span class="fu">ymd</span>(transaction_date)) <span class="sc">%&gt;%</span></span>
<span id="cb5-13"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb5-13" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(cost))  <span class="co"># Elimina filas con costos NA (Producto 23)</span></span></code></pre></div>
</div>
<div id="análisis-con-promedio-móvil" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Análisis con Promedio Móvil:<a href="análisis-de-series-de-tiempo-de-ventas.html#análisis-con-promedio-móvil" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Se crea una serie de tiempo (ventas_ts) a partir de las ventas diarias totales. Para suavizar la serie y visualizar tendencias, se calcula el promedio móvil con ventanas de 7 y 30 días. La gráfica resultante “Ventas Diarias Totales y Promedio Móvil” muestra la serie original junto con los promedios móviles. Se observa que el promedio móvil de 30 días suaviza aún más la serie, mostrando con mayor claridad las tendencias a largo plazo y minimizando las fluctuaciones diarias. El promedio móvil de 7 días, por otro lado, permite observar patrones semanales o de corto plazo.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-1" tabindex="-1"></a><span class="co"># Promedio móvil</span></span>
<span id="cb6-2"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-2" tabindex="-1"></a><span class="co"># Crear una serie de tiempo para las ventas diarias totales</span></span>
<span id="cb6-3"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-3" tabindex="-1"></a>ventas_ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(datos <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(transaction_date) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">VentasTotales =</span> <span class="fu">sum</span>(cost)) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(VentasTotales), <span class="at">frequency =</span> <span class="dv">365</span>)</span>
<span id="cb6-4"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-6" tabindex="-1"></a><span class="co"># Calcular el promedio móvil (ejemplo con ventana de 7 días y 30 días)</span></span>
<span id="cb6-7"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-7" tabindex="-1"></a>ventas_ma7 <span class="ot">&lt;-</span> <span class="fu">ma</span>(ventas_ts, <span class="at">order =</span> <span class="dv">7</span>)</span>
<span id="cb6-8"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-8" tabindex="-1"></a>ventas_ma30 <span class="ot">&lt;-</span> <span class="fu">ma</span>(ventas_ts, <span class="at">order =</span> <span class="dv">30</span>)</span>
<span id="cb6-9"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-9" tabindex="-1"></a></span>
<span id="cb6-10"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-10" tabindex="-1"></a></span>
<span id="cb6-11"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-11" tabindex="-1"></a><span class="co"># Graficar la serie de tiempo y el promedio móvil</span></span>
<span id="cb6-12"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-12" tabindex="-1"></a><span class="fu">autoplot</span>(ventas_ts) <span class="sc">+</span></span>
<span id="cb6-13"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-13" tabindex="-1"></a>  <span class="fu">autolayer</span>(ventas_ma7, <span class="at">series=</span><span class="st">&quot;Promedio Móvil 7 días&quot;</span>) <span class="sc">+</span></span>
<span id="cb6-14"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-14" tabindex="-1"></a>  <span class="fu">autolayer</span>(ventas_ma30, <span class="at">series =</span> <span class="st">&quot;Promedio Móvil 30 días&quot;</span>)<span class="sc">+</span></span>
<span id="cb6-15"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-15" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Ventas Diarias Totales y Promedio Móvil&quot;</span>) <span class="sc">+</span></span>
<span id="cb6-16"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb6-16" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Fecha&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Ventas&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="análisis-de-rezagos" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Análisis de Rezagos:<a href="análisis-de-series-de-tiempo-de-ventas.html#análisis-de-rezagos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Se calcula el rezago de las ventas con 1 y 7 días para explorar la autocorrelación en la serie. Estos rezagos se visualizan en la gráfica “Ventas Diarias Totales y Rezagos”, que permite observar la relación entre las ventas de un día y las ventas de uno o siete días anteriores. Esta información es relevante para entender la dependencia temporal de las ventas y puede ser útil en modelos predictivos.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-1" tabindex="-1"></a><span class="co"># 2. Rezagos (lags)</span></span>
<span id="cb7-2"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-2" tabindex="-1"></a><span class="co"># Calcular el rezago de las ventas (ejemplo con 1 y 7 días de rezago)</span></span>
<span id="cb7-3"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-3" tabindex="-1"></a>ventas_lag1 <span class="ot">&lt;-</span> <span class="fu">lag</span>(<span class="fu">as.numeric</span>(ventas_ts), <span class="dv">1</span>)</span>
<span id="cb7-4"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-5" tabindex="-1"></a>ventas_lag7 <span class="ot">&lt;-</span> <span class="fu">lag</span>(<span class="fu">as.numeric</span>(ventas_ts), <span class="dv">7</span>)</span>
<span id="cb7-6"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-6" tabindex="-1"></a></span>
<span id="cb7-7"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-8" tabindex="-1"></a><span class="co"># Crear el data.frame con los vectores numéricos</span></span>
<span id="cb7-9"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-9" tabindex="-1"></a>df_lags <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Fecha =</span> <span class="fu">time</span>(ventas_ts),</span>
<span id="cb7-10"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-10" tabindex="-1"></a>                     <span class="at">cost =</span> ventas_ts,</span>
<span id="cb7-11"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-11" tabindex="-1"></a>                     <span class="at">Lag1 =</span> ventas_lag1,</span>
<span id="cb7-12"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-12" tabindex="-1"></a>                     <span class="at">Lag7 =</span> ventas_lag7)</span>
<span id="cb7-13"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-13" tabindex="-1"></a></span>
<span id="cb7-14"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-14" tabindex="-1"></a></span>
<span id="cb7-15"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-15" tabindex="-1"></a><span class="co"># Graficar la serie y los rezagos</span></span>
<span id="cb7-16"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-16" tabindex="-1"></a><span class="fu">ggplot</span>(df_lags, <span class="fu">aes</span>(<span class="at">x =</span> Fecha)) <span class="sc">+</span></span>
<span id="cb7-17"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-17" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> cost, <span class="at">color =</span> <span class="st">&quot;cost&quot;</span>)) <span class="sc">+</span></span>
<span id="cb7-18"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-18" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Lag1, <span class="at">color =</span> <span class="st">&quot;Lag 1 día&quot;</span>)) <span class="sc">+</span></span>
<span id="cb7-19"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-19" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Lag7, <span class="at">color =</span> <span class="st">&quot;Lag 7 días&quot;</span>)) <span class="sc">+</span></span>
<span id="cb7-20"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-20" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Ventas Diarias Totales y Rezagos&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-21"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-21" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Fecha&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;cost&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-22"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb7-22" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;cost&quot;</span> <span class="ot">=</span> <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;Lag 1 día&quot;</span> <span class="ot">=</span> <span class="st">&quot;red&quot;</span>, <span class="st">&quot;Lag 7 días&quot;</span> <span class="ot">=</span> <span class="st">&quot;green&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="análisis-de-estacionalidad-descomposición" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Análisis de Estacionalidad (Descomposición):<a href="análisis-de-series-de-tiempo-de-ventas.html#análisis-de-estacionalidad-descomposición" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Para analizar la estacionalidad, se utiliza la función decompose que descompone la serie de tiempo en sus componentes: tendencia, estacionalidad y residuos. La gráfica resultante “Descomposición de la serie de tiempo de Ventas” muestra cada componente por separado. Se observa la tendencia general de las ventas a lo largo del tiempo, así como un patrón estacional recurrente. El componente de residuos representa la variabilidad que no se explica por la tendencia ni la estacionalidad.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb8-1" tabindex="-1"></a><span class="co"># 3. Estacionalidad (usando descomposición)</span></span>
<span id="cb8-2"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb8-3" tabindex="-1"></a>ventas_decomp <span class="ot">&lt;-</span> <span class="fu">decompose</span>(ventas_ts)</span>
<span id="cb8-4"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb8-5" tabindex="-1"></a><span class="fu">autoplot</span>(ventas_decomp) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Descomposición de la serie de tiempo de Ventas&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="análisis-de-estacionalidad-promedio-mensual" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Análisis de Estacionalidad (Promedio Mensual):<a href="análisis-de-series-de-tiempo-de-ventas.html#análisis-de-estacionalidad-promedio-mensual" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Para una visión más clara de la estacionalidad, se agrega un análisis de las ventas totales mensuales. La gráfica “Ventas Totales Mensuales” muestra las ventas agregadas por mes. Esta visualización permite identificar patrones estacionales a lo largo del año, como picos o valles de ventas en determinados meses. La configuración del eje x con intervalos de un mes y etiquetas que indican el mes y el año facilita la interpretación de la estacionalidad en la serie.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb9-1" tabindex="-1"></a><span class="co"># Análisis con promedio mensual para ver la estacionalidad</span></span>
<span id="cb9-2"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb9-2" tabindex="-1"></a>ventas_mensual <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb9-3" tabindex="-1"></a>  <span class="fu">group_by</span>(Mes, <span class="at">transaction_date =</span> <span class="fu">floor_date</span>(transaction_date, <span class="st">&quot;month&quot;</span>)) <span class="sc">%&gt;%</span> <span class="co"># Agrupa por mes y primer día del mes.</span></span>
<span id="cb9-4"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb9-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">VentasTotales =</span> <span class="fu">sum</span>(cost))</span>
<span id="cb9-5"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb9-5" tabindex="-1"></a></span>
<span id="cb9-6"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb9-6" tabindex="-1"></a><span class="fu">ggplot</span>(ventas_mensual, <span class="fu">aes</span>(<span class="at">x =</span> transaction_date, <span class="at">y =</span> VentasTotales)) <span class="sc">+</span></span>
<span id="cb9-7"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb9-7" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb9-8"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb9-8" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Ventas Totales Mensuales&quot;</span>) <span class="sc">+</span></span>
<span id="cb9-9"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb9-9" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Fecha&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Ventas&quot;</span>)<span class="sc">+</span></span>
<span id="cb9-10"><a href="análisis-de-series-de-tiempo-de-ventas.html#cb9-10" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">&quot;1 month&quot;</span>, <span class="at">date_labels =</span> <span class="st">&quot;%b %Y&quot;</span>) <span class="co"># Ajusta etiquetas del eje x</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
<div id="conclusión" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Conclusión<a href="análisis-de-series-de-tiempo-de-ventas.html#conclusión" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En resumen, este capítulo realiza un análisis exploratorio de las ventas utilizando diferentes técnicas de series de tiempo. El uso de promedios móviles, rezagos y descomposición permite identificar tendencias, patrones estacionales y autocorrelación en los datos, sentando las bases para un análisis más profundo y la construcción de modelos predictivos en capítulos posteriores.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pronóstico-de-ventas-en-empresa-retail.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="preprocesamientoy-visualización.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-actividad-2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
